# 如何判断一个函数是否为闭包？

## 闭包定义

> 可以访问另一个函数作用域中的变量的函数

## 实例

```js
function parent(){
  let n = 0
  return () => n++
}

const child = parent()
// child 函数是一个闭包
```

## 函数作用域

> 函数中局部变量的上下文，或者说函数中的局部变量能被访问的范围

## 作用域链

> 多个作用域连接到一起形成的作用域关系（父子关系），子作用域需要一个变量的时候会从自身出发查找，直到最上级作用域

## 函数声明周期

> 函数有两种状态：被调用时/未被调用时

> 被调用时会创建一个活动对象（函数作用域对象-上下文对象）AO，这个上下文保存了所有的局部变量，当函数执行结束，这个对象就会被释放，但是，如果这个对象仍然被引用，GC 则不会释放它

> 闭包会引用另一个函数的局部变量，使得另一个函数的作用域对象在函数执行完之后得不到释放

## 如何判断目标函数是否为闭包

从上面的解释来讲，要判断目标函数是否为闭包，就只需要看它是否引用的另一个函数的局部变量就行了

## 日常 coding 实践中碰到的闭包

### 函数工厂 factor

```js
function fn1(){
  console.log(1)
}

function fn2(){
  console.log(2)
}

function fn3(){
  console.log(3)
}

// 观察上面三个函数的共同点，可以改写成如下函数
function fnFactor(val) {
  return ()=>{
    console.log(val)
  }
}

const fn1 = fnFactor(1)
const fn2 = fnFactor(2)
const fn3 = fnFactor(3)
```
